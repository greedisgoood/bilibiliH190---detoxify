# B站恶意评论检测与自动举报系统

## 项目概述

该项目是一个自动化工具，用于搜索B站视频、读取评论、检测恶意评论（特别是华为极端粉丝言论和针对小米汽车的攻击性言论）、自动分类并举报违规内容，帮助创作者和用户维护健康的评论环境。系统结合了规则匹配和情感分析，能够识别多种类型的恶意言论，包括人身攻击、极端品牌对立、政治敏感内容等，并对其进行智能分类和高效举报。

## 主要功能

### 1. 视频搜索功能
- 支持按关键词搜索B站视频
- 可设置搜索结果数量限制
- 支持按热度、发布时间等排序
- 自动过滤不符合条件的视频

### 2. 评论获取功能
- 自动获取视频下的评论内容
- 支持分页获取评论
- 可设置评论获取数量限制
- 添加随机延迟，避免频繁请求

### 3. 恶意评论检测
- 结合规则匹配和情感分析识别多种类型恶意评论
- 专门针对华为极端粉丝言论和小米汽车相关负面言论进行检测
- 支持检测多种极端言论类型，包括盲目崇拜、阴谋论、竞品攻击等
- 引入上下文感知功能，考虑视频标题和其他评论的影响
- 支持误判样本分析和记录，不断提高检测准确率

### 4. 评论智能分类
- 将恶意评论分类为多种细分类型，如盲目崇拜、阴谋论、竞品攻击等
- 根据检测到的极端类型智能选择最合适的举报理由
- 基于历史成功率数据动态调整举报理由选择策略
- 支持多维度特征分析，提高分类准确性

### 5. 智能举报功能
- 对识别出的恶意评论按优先级排序后进行举报
- 根据置信度和点赞数等因素确定举报优先级
- 实现智能退避机制，在连续举报失败时自动调整策略
- 生成详细的举报说明，提高举报成功率
- 记录举报历史和成功率统计，不断优化举报策略

### 6. 系统控制和安全
- 登录状态检查和cookie管理
- 请求频率控制，避免触发风控
- 操作日志记录
- 配置文件支持

## 恶意评论分类类型

系统能够识别的恶意评论类型包括：

1. **盲目崇拜** - 过度夸大特定品牌优势的言论（如"华为最强"、"鸿蒙碾压安卓"）
2. **阴谋论** - 未经证实的阴谋论调（如"美国打压华为"）
3. **竞品攻击** - 恶意贬低竞争品牌的言论（如贬低小米、苹果等）
4. **用户群体攻击** - 攻击特定用户群体（如攻击米粉）
5. **泛化攻击** - 对产品的泛泛而论的负面评价
6. **民族主义** - 将品牌与爱国关联的极端言论（如"中国人就该用华为"）
7. **技术夸大** - 过度夸大技术优势（如"华为技术领先全球"）
8. **极端言论/诅咒** - 包含诅咒、威胁的言论
9. **幸灾乐祸/事故攻击** - 对小米汽车事故的幸灾乐祸言论
10. **讽刺/阴阳怪气** - 具有讽刺性质的言论

## 使用方法

### 环境配置

1. 安装必要的Python库：
```bash
pip install requests json re time random os dotenv datetime
```

2. 创建`.env`文件，配置B站cookie:
```
BILIBILI_COOKIE=你的B站cookie信息
```

3. 确保创建以下目录结构（程序会自动创建，但如果出错可手动创建）：
```
logs/  # 用于存放误判样本和日志
```

### 运行程序

```bash
python bilibili_h190.py
```

## 配置选项

可以在程序中调整以下配置：

### 搜索配置
- `search_keywords`: 搜索关键词列表
- `max_videos_per_keyword`: 每个关键词最多处理的视频数量
- `max_comments_per_video`: 每个视频最多处理的评论数量

### 检测配置
- `context_analysis_enabled`: 是否启用上下文感知分析
- `report_delay`: 举报延时配置
- `report_limit`: 举报频率限制

## 优化建议

### 提高辨识准确率
1. **增强情感分析能力**：
   - 引入更先进的NLP模型进行情感分析
   - 增强对讽刺和反讽的识别能力
   - 考虑使用阿里云本地语义识别NLP模型

2. **扩展变体词和谐音词处理**：
   - 建立更全面的变体词映射表
   - 增强对变体词和谐音词的识别能力

3. **优化正则表达式**：
   - 减少误匹配情况
   - 增加更多特定场景的模式匹配

4. **增强上下文感知**：
   - 进一步优化视频标题与评论内容的相关性分析
   - 考虑评论之间的关系，识别互动中的极端言论

5. **误判样本分析**：
   - 定期分析误判样本，找出共同特征
   - 根据误判样本调整检测规则和阈值

### 提高举报成功率
1. **优化举报理由选择**：
   - 进一步完善举报理由与极端类型的映射关系
   - 根据B站审核标准调整举报理由的选择策略

2. **增强举报说明生成**：
   - 生成更符合B站审核标准的举报说明
   - 针对不同类型的违规内容，提供更具针对性的描述

3. **优化举报时机**：
   - 分析B站审核的活跃时间段，在审核活跃时段进行举报
   - 避开高峰期和低活跃期

4. **进一步优化智能退避机制**：
   - 根据不同类型的举报失败原因，采取不同的退避策略
   - 实现更复杂的退避算法，如指数退避

5. **举报优先级进一步优化**：
   - 考虑更多因素，如评论发布时间、用户等级等
   - 开发更精细的优先级评分系统

## 注意事项
- 本工具仅用于帮助维护健康的网络环境，请勿滥用
- 使用前请确保已登录B站账号并获取有效cookie
- 过于频繁的操作可能触发B站风控机制，请合理设置延迟参数
- 定期更新cookie以保持登录状态
